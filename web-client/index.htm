<!DOCTYPE html>

<meta charset="utf-8">

<title>Dropzone simple example</title>

<script src="scripts/dropzone.js"></script>
<link rel="stylesheet" href="scripts/dropzone.css">


<p>
 Upload image
</p>

<!-- Change /upload-target to your upload address 
https://stackoverflow.com/questions/40506888/combine-normal-form-with-multiple-dropzones
http://sampathloku.blogspot.de/2014/02/dropzonejs-with-aspnet-mvc-5.html
http://www.dropzonejs.com/#configuration
-->
<form action="/upload-target" class="dropzone" id="sourceupload"></form>
<form action="/upload-target" class="dropzone" id="styleupload"></form>

<button id="submit-all">Submit All Files</button>

<script type="text/javascript">
    console.log('init');
    Dropzone.options.sourceupload = {
        autoProcessQueue : false,
        addedfile: function(file) { console.log(file); },
        init: function() {
            var submitButton = document.querySelector("#submit-all");
            var myDropzone = this; //closure

            submitButton.addEventListener("click", function () { myDropzone.processQueue(); });

            this.on('sendingmultiple', function(data, xhr, formData) {
                console.log('sendingmultiple');

                // add other form fields
                $.each($form.serializeArray(), function(index, item) {
                    formData.append(item.name, item.value);
                });

                // add other dropzone files
                for (var i = 1, length = this.dropzones.length; i < length; i++) {
                    var files = this.dropzones[i].getQueuedFiles();

                    for (var x = 0, fileLength = files.length; x < fileLength; x++) {
                        formData.append(this.dropzones[i]._getParamName(x), files[x], files[x].name);
                    }
                }
            });
        }       
    };

     Dropzone.options.styleupload = {
        autoProcessQueue : false,
        addedfile: function(file) { console.log(file); }
    };

</script>